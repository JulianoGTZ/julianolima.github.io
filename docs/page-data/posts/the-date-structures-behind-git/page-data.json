{
    "componentChunkName": "component---src-templates-post-template-jsx",
    "path": "/posts/the-date-structures-behind-git",
    "result": {"data":{"markdownRemark":{"id":"d413759a-c8e0-5b0f-8906-d9414cfa5c74","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/my-personal-blog/static/ef7bc30d35466f4037e9fd821d6e7efe/5a190/git-database-flow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.16666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAETklEQVQ4y02Ua2xTdRjGn+4CK7vJNsaUjcGGMkSJkKgkoBhjNAYdLopoCKBsmcOhQBQJCGyugw22tmu3rvfTrmtXhoMPYDATkHBTdjw7bIyxC1lPT2dP221dJYgfiOM1rfHy4Zf30/vPk+d5nz/4jjzwzmxwZsRgGQClhDjdt1hjdWK+xgTUNKKpbxCjoyNveQXPPqtBI689tFfedFwhV9VX/58k8B15W3hndjlnQRlnQQXL4H3sIsh1nZlrGVf5Aq2pNENtqMypUy0n+nOxPxBYd+3KpYTyLSUynbo+TlVXFaeqq45rPHoYqvrqOVF1xLsXE+/MJL4jl1h7EpERGUtVzMeLWsz0rMFOORoTLdQYVHRv6r0xUVQMDQ4UpQMJXe62NJfdmOJ2mFOMzY1yZV1VGjgGB3rtCTWsPf1IryPtCGtL2E1uxC9QWgvmqloV+c2W6sdUesXmE6fenfJ69og+sToUCq6ZmPAjEBBANAMiiqFtqJ2HXivA2lJBBNw6WYge+xyQGShosCD+mBa5GhPedHVFF1IFr2fjr+PiloH+my+K4vAqrzC0KRIJlNy/P7kxEgnM/3JnWTr6Tz0P9sRqFJTRrAE70MMkgq4C+cbTKHaexApjG2T1WnzdfQFBUcCdwdsxNV5h6NbIcD8JwhBJkoempvw7AcSDd+Xs553zaq6bUzUcI6v7hZHtjqrN15/IW21pVxTqrN/IG3Q1n575ftOkT1CIPlF3d3Tk7VDQuzUc9pskyaOeCPn04bB/1YbXXkoG73qCbnYuI96ZRbx7EbFtKUR6ZD6tYkqjoaw0OehxjYkKm80aInpGkKTimUeUVbp5K+7dm8ggovQoNrMGyqOHM8BZsY2zouKGNekzjkEly8g+QAohSWnLTlO2VmSoDZ/MVRkqVxqY50LC2A6fT2z46drVQp840jXQz5LoHf49IAnk841WAkgCZwB6DAD9BvTZoh7GxwLCcRtwRA15gw6ZaiOWNunxcCqE24N3Yh4Gg16zJHlCkn9sOCAJfsk/9iEAGW53b0fPd1+g/KtLqZ5zy3HDnoGHLcDaZhfqui+i4tRZZDUZ8YLVCRrqw1W2B+fOnsb1Kz9gV0UZujrbce3KeXA9l6HXHJODdxe08B25lhtMmru3LbmNtSXUkw3xS7SOZWusTqZIbzNmqQ3OghbL60Q06zLfm/3j+QuJd0f6i/v4n6smJnx7w2H/wUgk8FQs5d72ucS7coiPzo6F0abM/N0U67aFzWZaYWyj7CYjveLodND05CHvuM8xMjy0ftw3yo6NDZLXOxw7m+lpaWfUCnAWvMFZ8A5nRTFnQQnL4FXsJ0DdnpKm1G2Y1di6/klVy0cvq7XLl2zfHvVPdvH8GTx4EF4XiQR2TU6Ol0cfm3n0R15MIWfBf/zz23xOQJMb6cpWpDToMFttQvDwjtkHq/alKg7sSdY21qYC+LdyUYpyMxNb1EfT/wJV0XNMSKRnogAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/my-personal-blog/static/ef7bc30d35466f4037e9fd821d6e7efe/8ac56/git-database-flow.webp 240w,\n/my-personal-blog/static/ef7bc30d35466f4037e9fd821d6e7efe/d3be9/git-database-flow.webp 480w,\n/my-personal-blog/static/ef7bc30d35466f4037e9fd821d6e7efe/d00b9/git-database-flow.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/my-personal-blog/static/ef7bc30d35466f4037e9fd821d6e7efe/8ff5a/git-database-flow.png 240w,\n/my-personal-blog/static/ef7bc30d35466f4037e9fd821d6e7efe/e85cb/git-database-flow.png 480w,\n/my-personal-blog/static/ef7bc30d35466f4037e9fd821d6e7efe/5a190/git-database-flow.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/my-personal-blog/static/ef7bc30d35466f4037e9fd821d6e7efe/5a190/git-database-flow.png\"\n            alt=\"Git Flow. - Source: Git Docs\"\n            title=\"Git Flow. - Source: Git Docs\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n<em>Source: <a href=\"https://git-scm.com/book/en/v2/Git-Internals-Git-Objects\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Git Docs</a></em></p>\n<p>Have you ever thought about how Git persists our files? Although it is practically invisible, this persistence has many interesting aspects for those who like <strong>data structures</strong>.</p>\n<p>Let’s understand how it works?</p>\n<p><img src=\"https://dev-to-uploads.s3.amazonaws.com/i/4k5ferlxtghuylh63qrk.gif\" alt=\"Alt Text\"></p>\n<figure>\n\t<blockquote>\n\t\t<p>If you want to read and execute the Git commands in the post as you read, just clone the repository below in a terminal that has Git in.</p>\n\t</blockquote>\n</figure>\n<p><code class=\"language-text\">git clone https://github.com/JulianoGTZ/how-git-works.git</code></p>\n<h3 id=\"associative-data-structures\" style=\"position:relative;\"><a href=\"#associative-data-structures\" aria-label=\"associative data structures permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Associative Data Structures</h3>\n<p>According to the documentation, Git is a “content-addressable filesystem”, which in practice translates into a classic associative structure of key and value.</p>\n<p>In computer science, there are many associative structures such as <code class=\"language-text\">associative arrays, maps, symbol tables, or dictionaries</code>. Conceptually we are talking about an abstract data structure composed of key and value pairs, in which a given key references a value at least once.</p>\n<p>Although mathematics is an integral part of computer science, the term <strong>association has no relation with the association property of mathematics or propositional logic</strong>.</p>\n<p>Metaphorically it is as if Git managed to search for an element in its database similar to the way we search for the meaning of a word in a dictionary.</p>\n<p><strong>But what does git associate with?</strong></p>\n<h3 id=\"hashes-hashes-everywhere\" style=\"position:relative;\"><a href=\"#hashes-hashes-everywhere\" aria-label=\"hashes hashes everywhere permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hashes, Hashes everywhere</h3>\n<p>Git is guided by hashes. We can see this by running a <strong>git-log</strong> and see lots of them assigned to commits.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 906px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/my-personal-blog/static/77f71568062d8e75f39b050dfccc31ab/a20ae/hashes-everywhere.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 129.99999999999997%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAIBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAAB82KiksHfmkwH/8QAGBAAAgMAAAAAAAAAAAAAAAAAAhAAASD/2gAIAQEAAQUChO2Wf//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABcQAQEBAQAAAAAAAAAAAAAAAEEAECD/2gAIAQEABj8CZwjHr//EABwQAAICAgMAAAAAAAAAAAAAAAERECEAgZHR4f/aAAgBAQABPyG1hvUUsK64Ra6ZtsKCShc//9oADAMBAAIAAwAAABCE5H7/xAAXEQEAAwAAAAAAAAAAAAAAAAAQAREx/9oACAEDAQE/EJws/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8QIf/EAB0QAQACAgMBAQAAAAAAAAAAAAEAERAhMYGRYdH/2gAIAQEAAT8QNNeUiCC9kteWcF+1n6CuDTvoWWstxBEEdy12qv3H/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/my-personal-blog/static/77f71568062d8e75f39b050dfccc31ab/8ac56/hashes-everywhere.webp 240w,\n/my-personal-blog/static/77f71568062d8e75f39b050dfccc31ab/d3be9/hashes-everywhere.webp 480w,\n/my-personal-blog/static/77f71568062d8e75f39b050dfccc31ab/45005/hashes-everywhere.webp 906w\"\n              sizes=\"(max-width: 906px) 100vw, 906px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/my-personal-blog/static/77f71568062d8e75f39b050dfccc31ab/09b79/hashes-everywhere.jpg 240w,\n/my-personal-blog/static/77f71568062d8e75f39b050dfccc31ab/7cc5e/hashes-everywhere.jpg 480w,\n/my-personal-blog/static/77f71568062d8e75f39b050dfccc31ab/a20ae/hashes-everywhere.jpg 906w\"\n            sizes=\"(max-width: 906px) 100vw, 906px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/my-personal-blog/static/77f71568062d8e75f39b050dfccc31ab/a20ae/hashes-everywhere.jpg\"\n            alt=\"Git Log figure with many commits\"\n            title=\"Git Log figure with many commits\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><strong>Conceptualizing</strong>: A hash is a fixed-length string calculated by an algorithm specialized in it (such as MD5, SHA1) where the objective is to have a single result corresponding to the input parameters (aka seed).</p>\n<p>In the case of git, these keys can be generated from any sequence of bytes from any type of file. For each of these sequences, a key of type <a href=\"https://en.wikipedia.org/wiki/SHA-1\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">SHA1</a> is calculated.</p>\n<p>We can play with this key generation algorithm. Just run the following command in a terminal:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Cool article\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">git</span> hash-object --stdin\n\n$ e41d386e3fabb637ece1e5f9a5a88b25a9515909</code></pre></div>\n<p>And the result is always the same:</p>\n<p><code class=\"language-text\">e41d386e3fabb637ece1e5f9a5a88b25a9515909</code></p>\n<blockquote>\n<p>I had to use <em>echo</em>, <em>stdin</em> and <em>|</em> because we are only using the algorithm, but not operating on a sequence of bytes already known by git, as a committed file. That way we are sending a stream of bytes to git <strong>hash-object</strong> to encrypt</p>\n</blockquote>\n<p>The result of the function is deterministic, that is, given the same input, the function always returns the same result. This is one of the mechanisms that helps to ensure that each change in your repository mapped by git is respective to what has actually been changed.</p>\n<h2 id=\"commits\" style=\"position:relative;\"><a href=\"#commits\" aria-label=\"commits permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Commits</h2>\n<p>In order to talk about the next data structure we will need to understand a little more about the structure of commits:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 900px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/my-personal-blog/static/e768da5e60c08e47e7dded3745f15356/1cfc2/commit-update-readme.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAtklEQVQI11WKy26CQABF+QobcAATjFFkGB6TgJ0ORSS+YuLKff/BujH++zHSLtrFybn35jqt2XLRDTfT8d303OyG60fH1fbcN3se/WHY7k3Hl6zI7ZG5tEjzySKpWc1WNLHBxoZpWOAU+kAU1WSqJ5UdyXKN1vuBqj7xbs4s5pZJoBGuwhvJweO39Kd7Ga6ncF2FP85wJn5BWW5JkpZS75hGFcJT+CIbDn8JRE7g5/8tcsJfXvkJff9fEOay3ZsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/my-personal-blog/static/e768da5e60c08e47e7dded3745f15356/8ac56/commit-update-readme.webp 240w,\n/my-personal-blog/static/e768da5e60c08e47e7dded3745f15356/d3be9/commit-update-readme.webp 480w,\n/my-personal-blog/static/e768da5e60c08e47e7dded3745f15356/131f1/commit-update-readme.webp 900w\"\n              sizes=\"(max-width: 900px) 100vw, 900px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/my-personal-blog/static/e768da5e60c08e47e7dded3745f15356/8ff5a/commit-update-readme.png 240w,\n/my-personal-blog/static/e768da5e60c08e47e7dded3745f15356/e85cb/commit-update-readme.png 480w,\n/my-personal-blog/static/e768da5e60c08e47e7dded3745f15356/1cfc2/commit-update-readme.png 900w\"\n            sizes=\"(max-width: 900px) 100vw, 900px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/my-personal-blog/static/e768da5e60c08e47e7dded3745f15356/1cfc2/commit-update-readme.png\"\n            alt=\"Readme update commit\"\n            title=\"Readme update commit\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>With the hash of a commit in hand, we can use a function to read its contents: the <strong>cat-file</strong> function. Just use it by passing <strong>- p</strong> (print) and the hash that we observe as parameters:</p>\n<p><code class=\"language-text\">git cat-file -p 679b79c84959ea166b1fe91b048643a0dd8bd0b2</code></p>\n<p>Executing the command we see the following information:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 698px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/my-personal-blog/static/f1f866e4aa6e3430ba2d567d4297e9f4/487bb/git-commit-update-readme-detailed.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzklEQVQY012PyQ6CQBBE+Q1c4kmNjmEQFQF1WAYEFEwUjfvF//+HMtOauBwqlX7dne7SHK/E2M7hhxXi9Iw4O0MEO4iwQiAP8KM9ZHoiNhdbRMmRepxL1HUDDZ2jUftIy4o7RFDBcQsk2YWWqPZK8nR9I15sHwjlgZjSMr8iiF61ekgdb7ddaOYwBjcler0Fuh0PQysB6wtifeVcYmLnsKcrePMNBgMfhhGBMYGpsyZujZbE3FkJTQ0z5tOyarSaFpp181fvOP+cYn5H1jmeqsaEKF0ExFYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/my-personal-blog/static/f1f866e4aa6e3430ba2d567d4297e9f4/8ac56/git-commit-update-readme-detailed.webp 240w,\n/my-personal-blog/static/f1f866e4aa6e3430ba2d567d4297e9f4/d3be9/git-commit-update-readme-detailed.webp 480w,\n/my-personal-blog/static/f1f866e4aa6e3430ba2d567d4297e9f4/d1b7f/git-commit-update-readme-detailed.webp 698w\"\n              sizes=\"(max-width: 698px) 100vw, 698px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/my-personal-blog/static/f1f866e4aa6e3430ba2d567d4297e9f4/8ff5a/git-commit-update-readme-detailed.png 240w,\n/my-personal-blog/static/f1f866e4aa6e3430ba2d567d4297e9f4/e85cb/git-commit-update-readme-detailed.png 480w,\n/my-personal-blog/static/f1f866e4aa6e3430ba2d567d4297e9f4/487bb/git-commit-update-readme-detailed.png 698w\"\n            sizes=\"(max-width: 698px) 100vw, 698px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/my-personal-blog/static/f1f866e4aa6e3430ba2d567d4297e9f4/487bb/git-commit-update-readme-detailed.png\"\n            alt=\"Details of the readme update commit\"\n            title=\"Details of the readme update commit\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li><strong>tree</strong>: The hash corresponding to the repository’s directory and file structure (<em>More details below</em>)</li>\n<li><strong>parent</strong>: The previous commit hash.</li>\n<li><strong>author</strong>: The author of the commit (in this case, <strong>It’ me</strong>) and some timestamp information.</li>\n<li><strong>commiter</strong>: The committer is the one who actually merged a specific commit. For example: if you make a pull request for a project and one of the main members merits it, you will both receive credit - you as the author and the main member as the committer. We also have timestamp information here.</li>\n<li><strong>Update Readme</strong>: The commit message</li>\n</ul>\n<p>We can conceptualize that the commit is a snapshot of the current configuration of all indexed files in the repository. When I say indexed it is everything that has been previously versioned or what has been versioned after the commit.</p>\n<p>This exact picture of the repository is in the <code class=\"language-text\">tree</code> attribute of the commit. That’s cool but…, what is a <strong>tree</strong>?</p>\n<h3 id=\"tree\" style=\"position:relative;\"><a href=\"#tree\" aria-label=\"tree permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tree</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 719px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/my-personal-blog/static/a5c417e304a162b076d0de5db4adf49d/073e9/tree-highlighted-in-commit-update-readme.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.416666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA70lEQVQY002PwW6CUBBF+YtG0NidVXlKawHRKI8GEQGjWENLbV10U21s4/9vTvMwJl2czNx7ZxZXc7yM2SjlEG05r/ec8z3fyQvHuOCUlvws3zivPjjMt5yykt+s5CsuEHdjajcm9VqPut7HqPVo6H20cF4y8XM8L2UWveL7eYXSMtgQL3Yk6Tur/BPp50i5IQieiRY7grBgOFoynq5xvYxm4wFNiADLCmm3J7RaY6z7y678btdH9J4Y2DG2m+AM0yozRYApJI6b8GjHmKbEdhZ0OlM0ZapndajC2+agqtAwrAu6VekrV/9a0/hXWc0/YCCGLt3/xxsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/my-personal-blog/static/a5c417e304a162b076d0de5db4adf49d/8ac56/tree-highlighted-in-commit-update-readme.webp 240w,\n/my-personal-blog/static/a5c417e304a162b076d0de5db4adf49d/d3be9/tree-highlighted-in-commit-update-readme.webp 480w,\n/my-personal-blog/static/a5c417e304a162b076d0de5db4adf49d/05ca6/tree-highlighted-in-commit-update-readme.webp 719w\"\n              sizes=\"(max-width: 719px) 100vw, 719px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/my-personal-blog/static/a5c417e304a162b076d0de5db4adf49d/8ff5a/tree-highlighted-in-commit-update-readme.png 240w,\n/my-personal-blog/static/a5c417e304a162b076d0de5db4adf49d/e85cb/tree-highlighted-in-commit-update-readme.png 480w,\n/my-personal-blog/static/a5c417e304a162b076d0de5db4adf49d/073e9/tree-highlighted-in-commit-update-readme.png 719w\"\n            sizes=\"(max-width: 719px) 100vw, 719px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/my-personal-blog/static/a5c417e304a162b076d0de5db4adf49d/073e9/tree-highlighted-in-commit-update-readme.png\"\n            alt=\"Tree attribute highlighted in commit details\"\n            title=\"Tree attribute highlighted in commit details\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Not far from translation, it is a reference tree. Computationally, we are talking about a data structure with different connections between nodes of information, but different from a linear structure such as an array or a list, we have depth in navigability.</p>\n<p>Now that we know how to see the information inside a Git hash, just run the following command:</p>\n<p><code class=\"language-text\">git cat-file -p 59d80c6ce2b65acdb308058b2b0c97a4358df8f6</code></p>\n<p>And we have as a result:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 724px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/my-personal-blog/static/4b4571f9c0328e357b2ff866773ac733/a242d/commit-tree-content.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 6.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAASElEQVQI12Nwdov47+ga9j/SOvC/r3XAf2uHoP82dgH/be0D/zs4h/63cwgGs+2dQv47uoSB2TA+SJ28nPF/W4cgMF9Hx+E/AKz4I9YcYiKUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/my-personal-blog/static/4b4571f9c0328e357b2ff866773ac733/8ac56/commit-tree-content.webp 240w,\n/my-personal-blog/static/4b4571f9c0328e357b2ff866773ac733/d3be9/commit-tree-content.webp 480w,\n/my-personal-blog/static/4b4571f9c0328e357b2ff866773ac733/79561/commit-tree-content.webp 724w\"\n              sizes=\"(max-width: 724px) 100vw, 724px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/my-personal-blog/static/4b4571f9c0328e357b2ff866773ac733/8ff5a/commit-tree-content.png 240w,\n/my-personal-blog/static/4b4571f9c0328e357b2ff866773ac733/e85cb/commit-tree-content.png 480w,\n/my-personal-blog/static/4b4571f9c0328e357b2ff866773ac733/a242d/commit-tree-content.png 724w\"\n            sizes=\"(max-width: 724px) 100vw, 724px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/my-personal-blog/static/4b4571f9c0328e357b2ff866773ac733/a242d/commit-tree-content.png\"\n            alt=\"Result of the command executed above:\"\n            title=\"Result of the command executed above:\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>The result, although apparently not saying much, is representing exactly the structure of the repository that I am exploring as an example:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 913px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/my-personal-blog/static/85afa3e257b2adde6ffcdc957d2cdedd/93c35/image-repository.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHtPKhowf/EABoQAQEAAgMAAAAAAAAAAAAAAAIAARESITH/2gAIAQEAAQUC6N7akMKB4m//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAQIQABEf/aAAgBAQAGPwJlzKH/xAAZEAEAAwEBAAAAAAAAAAAAAAABABEhEDH/2gAIAQEAAT8hX2BeEKFmkrMIXAPIOf/aAAwDAQACAAMAAAAQgN//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPxCq/8QAFREBAQAAAAAAAAAAAAAAAAAAECH/2gAIAQIBAT8Qp//EAB0QAQADAAEFAAAAAAAAAAAAAAEAESExUWGRweH/2gAIAQEAAT8QAC5aVufISodSos36l68LfLzLRx0Dr5Yd5//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/my-personal-blog/static/85afa3e257b2adde6ffcdc957d2cdedd/8ac56/image-repository.webp 240w,\n/my-personal-blog/static/85afa3e257b2adde6ffcdc957d2cdedd/d3be9/image-repository.webp 480w,\n/my-personal-blog/static/85afa3e257b2adde6ffcdc957d2cdedd/5ffe7/image-repository.webp 913w\"\n              sizes=\"(max-width: 913px) 100vw, 913px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/my-personal-blog/static/85afa3e257b2adde6ffcdc957d2cdedd/09b79/image-repository.jpg 240w,\n/my-personal-blog/static/85afa3e257b2adde6ffcdc957d2cdedd/7cc5e/image-repository.jpg 480w,\n/my-personal-blog/static/85afa3e257b2adde6ffcdc957d2cdedd/93c35/image-repository.jpg 913w\"\n            sizes=\"(max-width: 913px) 100vw, 913px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/my-personal-blog/static/85afa3e257b2adde6ffcdc957d2cdedd/93c35/image-repository.jpg\"\n            alt=\"Repository\"\n            title=\"Repository\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>The versioning tree has two possible types of stored values:</p>\n<ul>\n<li><strong>Blob</strong>: is any binary file in the repository. In the example above is the <strong>README.md</strong></li>\n<li><strong>Tree</strong>: A directory. In practice it is a tree that can have several subfolders and files inside.</li>\n</ul>\n<p>The figure below represents exactly the folder and file structure of the repository.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/my-personal-blog/static/a211672f7153d7e8d404aba9d62ce869/e5ca1/how-git-works-tree.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBklEQVQ4y41Ty2oUQRTtv3Kj4G/oRhBciGsXbgYF1+LCQNy4EEWydSuIkmQxxsmYDBjz6Jmefj+rq7uqpjODcuRWU02MHZ3FoW9XnTp17qOsqqrAK46FPMeJd4CNr3exsX8Hm1/uI81jCCFBHEJd1/+F1ZJJsMGZP8Hm+B6eD2/j5d4D5CztBIm8jqhliEIIZGmOH99P4To+Ai9GlmfgValBl64jahkxxhhc10UYBpBSIM1SeE4AwRos1S8osVjPIeccvu/Dtm04joOiKPSGqCQ+H2/hzWiAd+MnOHC20cilrvc/BcuyxHQ6RRAEGp7nQUiBupR4tfcQg93rePTpGj4cvcZqAZScdU2q6qo/5SRJOlDq7aaAG5/h2B9jYg/hx44uTVvPq5ukm0JEA0MkKLnAuVpB1Q3caYgi4ViqnxC1vLKeVmf/AvRmVet6UXdZWeD94Qu83R9g69tTPV5KNl3n/3LYByNOrguW49nuLQx2buDx9k2M7I9o5Eqnfzl167LIRTEDziuczCcYHe3g8HSILE+glPqDa2Krzxl9pZSgCZjP57rzZcHhznxEQdu8MAzBWKl5lIU51+uQhMyhKIr0Og2667kIo3ZtNpvpcaM4y7J+h7RAN5qZJJDDOI61S7qAYhKjV0UxCVJMD6TXIdlP01S/HhIkMs0midG/+Zp9AomapvwGFPtcgb5oEHEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/my-personal-blog/static/a211672f7153d7e8d404aba9d62ce869/8ac56/how-git-works-tree.webp 240w,\n/my-personal-blog/static/a211672f7153d7e8d404aba9d62ce869/d3be9/how-git-works-tree.webp 480w,\n/my-personal-blog/static/a211672f7153d7e8d404aba9d62ce869/e46b2/how-git-works-tree.webp 960w,\n/my-personal-blog/static/a211672f7153d7e8d404aba9d62ce869/abf82/how-git-works-tree.webp 1332w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/my-personal-blog/static/a211672f7153d7e8d404aba9d62ce869/8ff5a/how-git-works-tree.png 240w,\n/my-personal-blog/static/a211672f7153d7e8d404aba9d62ce869/e85cb/how-git-works-tree.png 480w,\n/my-personal-blog/static/a211672f7153d7e8d404aba9d62ce869/d9199/how-git-works-tree.png 960w,\n/my-personal-blog/static/a211672f7153d7e8d404aba9d62ce869/e5ca1/how-git-works-tree.png 1332w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/my-personal-blog/static/a211672f7153d7e8d404aba9d62ce869/d9199/how-git-works-tree.png\"\n            alt=\"Example of a tree\"\n            title=\"Example of a tree\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>We can see that the <strong>leaf node</strong> (the node at the end of the tree) will always be a Blob. In practice this means that Git does not version empty folders. A <strong>tree</strong> will only exist if there is a reference to a file inside that folder.</p>\n<figure>\n\t<blockquote>\n\t\t<p>Commits are essentially references for new trees. Whenever we change a file, add a different file or rename a folder, we are also reorganizing this reference tree.</p>\n\t</blockquote>\n</figure>\n<p><img src=\"https://git-scm.com/book/en/v2/images/data-model-3.png\" alt=\"Git documentation\"></p>\n<p>As shown in the figure presented at the beginning of the article, we are always generating new trees at each commit. As we are working on a system that uses deterministic functions which any minimal change already makes the structure different, we are always recreating new branches among the multiple possible versions of our files. The name <strong>branch</strong> makes more sense now, doesn’t it?</p>\n<p>It is also interesting to know that git has a <strong>garbage collector</strong> system. The goal is to remove unnecessary files from old branches that no longer make sense in the repository. But how does Git evaluate this?</p>\n<p>Given it’s a tree the git only needs to find unrelated nodes. For instance, you can use the command <code class=\"language-text\">git gc --prune</code>. This commands scans the versioning trees and finds branches that are no longer related to any branch of the versioning tree (Due to some merge probably)</p>\n<h2 id=\"a-little-bit-about-immutability\" style=\"position:relative;\"><a href=\"#a-little-bit-about-immutability\" aria-label=\"a little bit about immutability permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A little bit about immutability</h2>\n<p>If you have seen any content on functional programming, you must have read the word <strong>immutability</strong>. At first, those who work with languages that don’t have native support for it may find the concept a little weird. <em>If I’m programming abstractions like classes, interfaces, and generic functions why would it be interesting a code without variables?</em></p>\n<p><img src=\"https://media.giphy.com/media/XEo7YJHUeplXa/giphy.gif\" alt=\"famous scene that a guard asks for calm\"></p>\n<p>Calm down, that’s not exactly what immutability is about. In fact, the concept of immutability is about making a certain value accessible even if its direct reference has changed, so the value is still accessible for computations that may need to see that value in the future.</p>\n<p>In practice what does that mean?</p>\n<p>The existing commands to change commits like <strong>git rebase</strong> or <strong>git change</strong> write new commits and do not change previous commits directly. When rewriting a commit we are defining new attributes such as timestamp, new author, or new changes in <strong>blobs</strong> (consequently in <strong>trees</strong>), so it’s a new commit.</p>\n<p>We are not making a classic change in the value of a variable as in programming, but writing a new reference and preserving the old one. If this structure were not immutable each time we rebase, we would also change all references to all other branches in the repository that know those same files.</p>\n<p><strong>Thanks Immutability</strong></p>\n<h2 id=\"going-further\" style=\"position:relative;\"><a href=\"#going-further\" aria-label=\"going further permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Going Further</h2>\n<p>There are much more topics about how git works internally such as Branches, Tags, Merge vs Rebase, the three areas of Git, Fast-Forward, HEAD, and so on. I promise to write about this in future articles.</p>\n<p>I leave some recommendations for content in case you want to understand more deeply the references of this article:</p>\n<ul>\n<li><a href=\"https://git-scm.com/book/en/v2\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">The book Git PRO - Free</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=nHkLxts9Mu4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Video by Paolo Perrota explaining how Git works</a></li>\n<li><a href=\"https://www.pluralsight.com/courses/how-git-works\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How Git Works - Pluralsight</a></li>\n</ul>\n<p><em>See you later o/</em></p>","fields":{"slug":"/posts/the-date-structures-behind-git","tagSlugs":["/tag/git/","/tag/data-structures/","/tag/deep-dive/"]},"frontmatter":{"date":"2020-11-02T22:40:32.169Z","description":"How does Git save our files? In which data structures are our files persisted? Let's better understand how Git arranges our data by exploring the existing data structures under the hood. ","tags":["Git","Data Structures","Deep Dive"],"title":"The Data Structures Behind Git","socialImage":"/media/git-database-flow.png"}}},"pageContext":{"slug":"/posts/the-date-structures-behind-git"}},
    "staticQueryHashes": ["251939775","3942705351","401334301"]}